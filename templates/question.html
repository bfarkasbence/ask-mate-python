<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Display a question</title>
    <link rel="stylesheet" type="text/css" href="/static/design.css">
    <link rel="shortcut icon" href="/static/logo.ico" />
</head>
<body>
<h1><table><tr><td width=20% ><div align="center">
    <form action="/search" method="get" >
    <input type="text" name="search_box" placeholder="What are you looking for?"><br>
    <button type="submit" class="button">Search</button></a>
    </form>
</div></td>
<td width=60% style="font-size: 35px">Question:</td>
<td width=20% style="font-size: 13px">{% if session.username %}
 You are logged in as <i>{{ session.username }}</i>
<a href="/logout">
    <button type="button" class="button">Log out.</button></a>
{% else %}
<a href="/login">
    <button type="button" class="button">Log in.</button>
</a>
{% endif %}</td></tr></div>
</table>
</h1>
<table>
    <tr align="center">
        <th>ID</th>
        <th>Submission time</th>
        <th>View number</th>
        <th>Vote number</th>
        <th>Title</th>
        <th>Message</th>
        <th>Image</th>
    </tr>
    <tr>
        {% for item in question_data %}
            {% for data in item.values() %}
            <td align="center">
                {{ data }}
            </td>
            {% endfor %}
        <td>
        {% if session.user_id is defined %}
        <a href="/question/{{ item.id }}/new-comment"><button type="button" class="button">💬</button></a>
        {% endif %}
        </td>
        {% if session.user_id is defined %}
        <td>
            <a href="/questions/{{ item.id }}/like"><button type="button" class="button">👍</button></a>
        </td>
        <td>
            <a href="/questions/{{ item.id }}/dislike"><button type="button" class="button">👎</button></a>
        </td>
            {% endif %}
        {% endfor %}
    </tr>
    {% if comment_data != None %}
    {% for item in comment_data %}
        {% if item.question_id != None %}

        <tr>
            <td>{{ item.submission_time }}</td>
            <td> {{ item.message }}</td>
            {% if session.user_id == item.user_id or session.user_id == 0%}
            <td><a href="/comment/{{ item.question_id }}/{{ item.id }}/edit"><button class="button">Edit comment!</button></a></td>
            <td><a href="/comment/{{ question_id }}/{{ item.id }}/delete"><button class="button">🗑️</button></a> </td>
            {% endif %}
        </tr>
        {% endif %}
    {% endfor %}
    {% endif %}
</table>
<h2>Answers:</h2>
<div class="align-center">
    {% if session.user_id is defined %}
<a href="/questions/{{ question_id }}/new-answer">
    <button type="button" class="button" style="width: 140px">Add answer!</button>
</a>
    {% endif %}
</div>
{% if answers_data|length == 0 %}
<table>
    <tr>
        <td>There is no answer yet.</td>
    </tr>
</table>
{% else %}
<table>
    <tr>
        <th>ID</th>
        <th>Submission time</th>
        <th>Vote number</th>
        <th>Question ID</th>
        <th>Message</th>
        <th>Image</th>
        <th>User ID</th>
    </tr>
    {% for item in answers_data %}
        <tr>

        {% for data in item.values() %}
            <td class="topborder" >
                {{ data }}
            </td>
        {% endfor %}
        {% if session.user_id is defined %}
            <td class="topborder">
                <a href="/answer/{{item.question_id }}/{{ item.id }}/new-comment"><button type="button" class="button">💬</button></a>
            </td>
            <td class= "topborder">
                <a href="/answer/{{ item.question_id }}/{{ item.id }}/like"><button type="button" class="button">👍</button></a>
            </td>
            <td class="topborder">
                <a href="/answer/{{ item.question_id }}/{{ item.id }}/dislike"><button type="button" class="button">👎</button></a>
            </td>
        {% endif %}
        {% if session.user_id == item.user_id or session.user_id == 0 %}
            <td class="topborder">
                <a href="/answer/{{ item.id }}/edit"><button type="button" class="button">✍️</button></a>
            </td>
            <td class="topborder">
                <a href="/answer/{{ item.question_id }}/{{ item.id }}/delete"><button type="button" class="button">🗑️</button></a>
            </td>
            {% endif %}

    </tr>
    {% for comments in comment_data %}
        {% if item.id == comments.answer_id %}
        <tr>
            <td>{{ comments.submission_time }}</td>
            <td>{{ comments.message }}</td>
            {% if session.user_id == comments.user_id or session.user_id == 0 %}
            <td><a href="/comment/{{ question_id }}/{{ comments.id }}/edit"><button class="button">✍️</button></a></td>

            <td><a href="/comment/{{ question_id }}/{{ comments.id }}/delete"><button class="button">🗑️</button></a></td>
            {% endif %}
        </tr>

        {% endif %}
    {% endfor %}
    {% endfor %}
</table>
{% endif %}
<div class="align-center">
<a href="/list">
    <button type="button" class="button" style="width: 160px">Back to questions.</button>
</a>
{% if session.user_id == question_data[0].user_id or session.user_id == 0 %}
<a href="/questions/{{ question_id }}/delete">
    <button type="button" class="button" style="width: 160px">Delete question.</button>
</a>
{% endif %}
</div>
</body>
</html>